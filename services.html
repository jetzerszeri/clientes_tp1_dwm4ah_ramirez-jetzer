<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GbyG PCS</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://kit.fontawesome.com/26eb2bb81f.js" crossorigin="anonymous"></script>
    <script src="js/main.js" defer></script>
</head>
<body>
    <header class="navegacion"> 
        <nav>
            <div  class="navbar">
                <div>
                    <div class="navbarlogo">GbyG PCS</div>
    
                    <div class="toggle-button">
                        <span class="bar"></span>
                        <span class="bar"></span>
                        <span class="bar"></span>
                    </div>
                    
                </div>
    
                <div class="navbar-links">
                    <ul>
                        <li><a href="index.html">Inicio</a></li>
                        <li><a href="services.html" class="active">Servicios</a></li>
                        <li><a href="/admin.html" class="">Dashboard</a></li>
                    </ul>
                    <div>
                        <a href="/login.html" class="btn">Iniciar sesión</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="servicescontainer">
        <header class="servicesheader">
            <div>
                <h1>Servicios profesionales de limpieza</h1>
                <p>Elevando el estandar de limpieza con soluciones personalizadas.</p>
            </div>

            <div>
                <ul class="filterBtns">
                    <li><a href="" class="btn secundary-green">Remodelación</a></li>
                    <li><a href="" class="btn secundary-green">Mudanza</a></li>
                    <li><a href="" class="btn secundary-green">Real State</a></li>
                </ul>
            </div>
        </header>
    </main>

<footer>
    <div>
        <ul>
            <li><a href="" target="_blank"><i class="fa-brands fa-facebook"></i></a></li>
            <li><a href="" target="_blank"><i class="fa-brands fa-x-twitter"></i></i></a></li>
            <li><a href="" target="_blank"><i class="fa-brands fa-instagram"></i></a></li>
        </ul>
        <div>
            <p>gbygpcs.com</p>
            <p>© 2023 Copyright</p>
        </div>
    </div>
</footer>
<script type="module">
    import findByCategory from './js/services.js';
    // console.log(services);

    const ulFilterBtns = document.querySelector(".filterBtns");
    const filterButtons = document.querySelectorAll(".filterBtns .btn");


    filterButtons.forEach(button => {
        button.addEventListener("click", function(event) {
            event.preventDefault();
            let category = event.target.innerText; 
            console.log(category);
            updateServicesList(category); 
        });
    });


    const servicesList = document.querySelector('.servicescontainer section ul');
    const main = document.querySelector('.servicescontainer');
    const sectionServices = document.createElement('section');
    const ulServices = document.createElement('ul');

    //aquí inicialmente 
    function updateServicesList(category){
        if (category !== 'all') {
            if (!ulFilterBtns.querySelector('.limpiarfiltro')) {
                let clearFilterBtn = document.createElement('li');
                clearFilterBtn.innerHTML = `<a href="" class="btn secundary-green limpiarfiltro">Mostrar todos</a>`;
                clearFilterBtn.addEventListener('click', function(event){
                    event.preventDefault();
                    updateServicesList('all');
                    event.target.parentElement.remove();
                });
                ulFilterBtns.prepend(clearFilterBtn);

            }
        }

        findByCategory(category)
        .then(services => {
            ulServices.innerHTML = '';
            services.forEach(data => {
        
            
                const {name, category, price} = data.data();
        
                let item = document.createElement('li');
                let divContainer = document.createElement('div');
                let divImg = document.createElement('div');
                let img = document.createElement('img');
                img.src = 'img/servicesimg.jpg';
                img.alt = name;
                let divInfo = document.createElement('div');
                divInfo.innerHTML = `
                <div>
                    <h2>${name}</h2>
                    <p>${category}</p>
                </div>
                <p>$${price}/sqft</p>
                <a href="contact.html" class="btn secundary-green">Contactar</a>`;
                divImg.append(img);
                divContainer.append(divImg);
                divContainer.append(divInfo);
                item.append(divContainer);
                ulServices.append(item);
            })
        
            if (!ulServices.parentElement) { // para no agregar multiples veces
                sectionServices.append(ulServices);
                main.appendChild(sectionServices);
            }
        })
    }

    updateServicesList('all');

</script>
</body>
</html>